<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info

| (1) 과제명            | AI 기반 화폐 인식과 위치 기반 매칭을 통해 집에 보관 중인 외화를 근처 사용자와 연결해주는 스마트 외화 직거래 서비스                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| :-------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| (2) 팀 번호 / 팀 이름 | 05-무한도전                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| (3) 팀 구성원         | 박세진(2271026): 리더, AI + 프론트엔드 <br> 김기림(2271009): 팀원, 프론트엔드 <br> 박민서(2271025) : 팀원, 백엔드                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| (5) 과제 분류         | 산학과제                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| (6) 과제 키워드       | P2P 환전, AI 카메라 인식, 위치 기반 매칭                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| (7) 과제 내용 요약    | 본 프로젝트는 귀국 후 남은 외화를 근처 사용자와 연결해 수수료 없이 직접 환전할 수 있도록 지원하는 AI 기반 스마트 외화 직거래 서비스입니다. 외화를 촬영하면 AI가 화폐의 종류와 국가를 인식하고, 실시간 환율을 반영한 원화 가치를 제공합니다. 사용자는 보유한 외화 금액을 쉽게 계산할 수 있으며, 외화 구매를 원할 경우 원하는 통화와 금액, 위치 정보를 입력하면 적절한 거래 상대를 자동으로 추천받아 채팅으로 거래를 조율할 수 있습니다. 이를 통해 판매자는 남은 외화를 효율적으로 처리할 수 있고, 구매자는 필요한 외화를 빠르고 간편하게 확보할 수 있습니다. |

<br>

# Project-Summary

| 항목                  | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :-------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| (1) 문제 정의         | **[Target Customer]**<br>해외 여행 후 남은 외화, 특히 동전을 환전하고 싶은 사람,<br>은행에서 환전이 어려운 사람,<br>다양한 국가의 화폐를 보유하고 있지만 정리가 어려운 사람<br><br>**[Pain Point]**<br>1. **남은 외화 처리의 어려움**<br>귀국 후 남은 화폐, 특히 동전은 환전소에서 취급되지 않거나, 매우 낮은 가치로 환급됩니다 (대부분 액면가의 50% 이하).<br>이로 인해 사용자들은 경제적 손실을 감수하게 되며, 동전은 사실상 사용 가치가 없는 불필요한 물건으로 전락합니다.<br>결과적으로 이러한 화폐는 제대로 사용되지 않고 방치되거나 폐기됩니다.<br>또한 지폐 환전이 가능한 은행도 영업시간 제한으로 인해 방문이 어려워, 환전 기회를 놓치기 쉽습니다.<br>개인 간 환전에 특화된 플랫폼이 없어, 여행자들이 남은 외화를 효율적으로 교환할 방법이 마땅치 않습니다.<br>결국 남은 외화는 처리하기 어려워 가치를 잃은 채 방치됩니다. <br><br>2. **외화 종류 구별의 어려움**<br>여러 국가의 화폐를 소지한 사용자들은 시간이 지나면서 화폐의 국가 및 종류를 구별하기 어려워집니다.<br>특히 외국어로 표기된 화폐나, 비슷한 크기와 모양을 가진 동전은 직관적으로 식별하기 어렵습니다.<br>또한, 동전의 경우 원화로 환산된 가치를 일일이 계산해야 하는 불편함이 있습니다.                                                                                                                                                                                                                                                                                                                                                                                                                              |
| (2) 기존연구와의 비교 | <img src="https://i.imgur.com/8Y8qhAF.png" width="600"/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| (3) 제안 내용         | - 고객이 보유한 외화의 국가를 쉽게 식별하고, 해당 화폐의 원화 환산 가치를 직관적으로 확인할 수 있도록 지원합니다.<br>- 고객이 보유 중인 외화 전체의 총액을 원화 기준으로 간편하게 확인 가능하도록 합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| (4) 기대효과 및 의의  | - **편리한 외화 거래 환경 제공**<br>AI 기반 카메라 인식과 위치 기반 매칭 시스템을 활용하여 사용자가 외화를 손쉽게 확인하고, 원하는 화폐와 금액에 맞는 거래 상대를 자동으로 추천 받을 수 있습니다.<br>이로 인해 외화 거래 과정에서의 불편함을 크게 줄일 수 있으며, 사용자에게 더 직관적이고 효율적인 거래 환경을 제공합니다.<br><br>- **시간과 비용 절감**<br>사용자는 거래를 진행할 때 시간과 비용을 절약할 수 있습니다.<br>위치 기반 매칭 시스템 덕분에 근처에서 거래 가능한 판매자를 빠르게 찾을 수 있으며, 채팅 기능을 통해 실시간으로 소통하면서 거래를 진행할 수 있습니다.<br>또한, 중간 지점 추천 시스템은 거래 장소 선택의 번거로움을 해결하여 사용자 편의를 증대시킵니다.<br><br>- **경제적이고 합리적인 환전**<br>P2P 방식으로 수수료를 없앰으로써, 전통적인 은행 환전 방식에 비해 더욱 경제적이고 합리적인 환전 환경을 제공합니다.<br>이를 통해 사용자들은 더 유리한 환율을 경험할 수 있으며, 불필요한 비용을 절감할 수 있습니다.<br><br>- **환율 변동에 대한 신속한 대응**<br>외화 계산기 기능은 사용자가 실시간으로 환율 변동을 파악하고, 이에 따라 환전 시점을 결정할 수 있도록 돕습니다.<br>이는 사용자가 최적의 환율을 적용 받을 수 있는 기회를 제공하며, 시장 변동에 민첩하게 대응할 수 있게 합니다.<br><br>- **P2P 시장 활성화 및 글로벌 금융 혁신**<br>본 프로젝트는 P2P 방식의 외환 거래를 활성화시켜, 개인 간의 직접적인 금융 거래를 촉진합니다.<br>이는 기존 금융 시스템의 한계를 극복하고, 글로벌 금융 시장에서의 혁신적인 변화를 이끌어낼 가능성을 지니고 있습니다.<br>사용자들이 더 많은 선택권과 자율성을 가지고 환전할 수 있는 환경을 조성하는데 일조할 수 있습니다. |
| (5) 주요 기능 리스트  | - **AI 기반 화폐 인식 및 실시간 환율 제공**<br>사용자가 외화를 촬영하면 AI가 자동으로 화폐의 종류와 국가를 인식하고, 실시간 환율 정보를 바탕으로 해당 화폐의 원화 가치를 즉시 제공합니다.<br><br>- **외화 총액 및 환산 금액 계산 기능**<br>사용자가 보유한 외화의 지폐 및 동전 개수를 입력하면, 이를 바탕으로 외화 총액을 계산하고 원화 기준 환산 금액을 제공합니다.<br><br>- **판매자 자동 추천 기능**<br>사용자가 구매를 원하는 통화, 금액, 위치 정보를 입력하면, 이를 기반으로 근처의 적절한 판매자를 AI가 자동으로 추천합니다.<br><br>- **실시간 채팅 기반 1:1 거래 조율 기능**<br>은행을 거치지 않고, 판매자와 구매자가 실시간 채팅을 통해 직접 소통하며 거래 일시, 장소 등을 조율할 수 있도록 지원합니다.<br><br>- **중간 거래 장소 추천 기능**<br>매칭된 판매자와 구매자의 위치를 고려하여 양측이 모두 접근하기 쉬운 중간 지점을 계산하고, 추천 거래 장소를 제시합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---|---|
| (1) 요구사항 정의 | <img src="https://i.imgur.com/gLm9DIn.png" width="600"><br><br><img src="https://i.imgur.com/j6ZaKRL.png" width="600"><br></p> |
| (2) 전체 시스템 구성 |<img src="https://i.imgur.com/WcxejqQ.png" width="600"><br></p> |
| (3) 주요엔진 및 기능 설계 | ~~• **회원가입 및 로그인 모듈**: 서비스 이용을 위한 회원가입과 로그인 절차를 담당하는 모듈로, 사용자의 신원을 인증하고 개별 사용자의 활동을 식별할 수 있도록 합니다.<br>  ◦ **주요 기능**: 구글 소셜 로그인 및 회원가입, 카카오 소셜 로그인 및 회원가입<br>  ◦ **기술적 설계**:<br>    • **구글 소셜 로그인 및 회원가입**<br>      - OAuth 2.0 인증 프로토콜을 사용하여 구글 로그인 API와 연동합니다.<br>      - 구글 개발자 콘솔에서 클라이언트 ID와 클라이언트 시크릿을 발급받아 인증을 설정합니다.<br>      - 사용자 인증 후, Google API Client를 통해 사용자 정보를 요청하고 시스템에 저장합니다.<br>    • **카카오 소셜 로그인 및 회원가입**<br>      - OAuth 2.0 인증을 사용하여 카카오 로그인 API와 연동합니다.<br>      - 카카오 개발자 콘솔에서 앱 키를 발급받아 인증을 설정합니다.<br>      - 카카오 로그인 후, 카카오 API를 통해 사용자 정보를 받아와 시스템에 저장합니다.~~<br><br>• **화폐 인식 모듈**: 사용자가 보유한 외화를 촬영하면 AI 모델이 자동으로 화폐의 종류(지폐/동전)와 발행 국가를 인식하고, 실시간 환율 정보와 연계하여 해당 화폐의 원화 환산 가치를 제공하는 모듈입니다. 복잡한 화폐 분류 작업을 자동화함으로써 사용자 편의성을 극대화하고, 정확한 정보 제공을 실현합니다.<br>  ◦ **주요 기능**: 외화 이미지 인식, 화폐 종류 및 국가 분류, 실시간 환율 반영 원화 환산, 프론트-백엔드 연동을 통한 사용자 응답 제공<br>  ◦ **기술적 설계**:<br>    • 데이터 수집 및 라벨링<br>      - 총 9개국 87종류의 화폐(지폐 및 동전)를 대상으로 1,387장의 이미지 데이터를 수집하고, Roboflow를 사용하여 객체 탐지 방식으로 바운딩 박스 기반의 라벨링을 진행하였습니다.<br>    • AI 모델 학습<br>      - YOLOv8 object detection 모델을 기반으로 학습을 진행하였으며,<br>        - 초기에는 `yolov8n.pt`로 300 에포크 학습한 결과 mAP 0.53을 달성하였고,<br>        - 이후 `yolov8s.pt` 모델을 활용하여 최적의 에포크를 탐색한 결과, 212번째 에포크에서 precision 0.7213의 성능을 기록하며 best model을 확보하였습니다.<br>    • 모델 배포 및 연동<br>      - 학습된 모델은 FastAPI 기반의 백엔드 서버에 로컬로 구축되었고, 이를 프론트엔드와 연동하여 사용자가 이미지 업로드 시, 화폐 종류 및 국가 정보 → 해당 화폐의 실시간 환율 적용 원화 환산 결과를 실시간으로 받아볼 수 있도록 구성하였습니다.<br>    • 환율 연동 처리<br>      - 실시간 환율 정보는 외부 API(`https://api.exchangerate-api.com/v4/latest/KRW`)를 호출하여 동기적으로 적용되며, 인식된 화폐에 대해 원화 기준 환산 결과를 함께 제공합니다.<br><br>• **환전 모듈**: 실제 P2P 환전 거래의 핵심 로직을 담당하는 모듈로, 사용자의 외화 구매/판매 요청을 처리하고, 환율에 따라 환산 금액을 계산한 뒤 조건에 부합하는 거래 상대방을 매칭하는 역할을 수행합니다.<br>  ◦ **주요 기능**: 외화 판매, 외화 구매 및 거래 상대 매칭, 환율 계산, 판매 필터링<br>  ◦ **기술적 설계**:<br>    • 외화 판매<br>      - 판매자는 자신의 보유 외화 통화, 금액, 거래 희망 장소 및 이미지 등을 등록하여 판매 글을 작성합니다.<br>      - 판매 상태는 '판매중', '예약됨', '거래완료' 등으로 관리되며, 거래가 성사되면 상태가 변경됩니다.<br>    • 외화 구매 및 거래 상대 매칭<br>      - 사용자가 구매하고자 하는 외화 종류, 구매 희망 금액, 거래를 희망하는 위치 등을 입력하면 해당 조건을 기반으로 판매자 정보를 필터링합니다.<br>      - 필터링된 판매자 목록은 사용자에게 추천 판매자 리스트로 노출됩니다.<br>      - 사용자가 원하는 판매자를 선택하면, 해당 판매자와의 채팅방이 생성되어 거래 조율이 가능해집니다.<br>    • 환율 계산을 위한 외부 API 호출<br>      - 외화 환산에 필요한 실시간 환율 정보는 공신력 있는 외부 환율 API(`https://api.exchangerate-api.com/v4/latest/KRW`)에서 호출하여 최신 정보를 반영합니다.<br>    • 판매 필터링<br>      - 사용자는 판매 목록의 필터링 기능을 통해서 원하는 금액, 원하는 통화의 종류를 효과적으로 검색할 수 있습니다.<br><br>• **채팅 모듈**: 거래를 원하는 사용자(구매자)와 판매자 간에 실시간으로 1:1 채팅이 가능하도록 하여 거래 일정, 장소 등을 직접 조율할 수 있게 합니다.<br>  ◦ **주요 기능**: 1:1 채팅방 생성, 실시간 메시지 송수신, 채팅 기록 저장<br>  ◦ **기술적 설계**:<br>    • 1:1 채팅방 생성<br>      - 판매자와 구매자 간의 매칭이 성사되면 채팅방이 생성되며, 이후 해당 채팅방에서 실시간 대화가 가능해집니다.<br>    • 실시간 메시지 송수신<br>      - WebSocket 기반의 양방향 통신을 통해 실시간으로 메시지를 주고받습니다.<br>      - 메시지는 전송 즉시 상대방에게 전달되며, 프론트엔드에서는 말풍선 UI로 시각화됩니다.<br>    • 채팅 기록 저장<br>      - 모든 메시지는 백엔드에서 데이터베이스(Redis)에 저장되며, 웹 재접속 시에도 이전 대화 내용을 확인할 수 있습니다.<br>    • 거래 장소 추천<br>      - 채팅 과정에서 "장소 추천" 버튼을 누르면, 서버에서 판매자와 구매자의 거래희망 위도/경도 정보를 받아 중간 지점 좌표를 계산합니다.<br>      - 계산된 중간 지점을 바탕으로, Kakao Map API의 좌표 검색 기능(`coord2regioncode`)을 이용해 주소 정보를 확인하고, 이를 Kakao Places API의 `category.json`을 통해 해당 위치 근처의 편의점, 카페, 지하철역 등의 안전한 만남 장소로 보정하여 추천합니다.<br><br>• **기부 모듈**: 사용자가 기부를 진행할 수 있도록 하는 모듈입니다.<br>  ◦ **주요 기능**: 기부 금액 등록, 기부 상태 관리, 기부 금액에 따른 실시간 기부 랭킹<br>  ◦ **기술적 설계**:<br>    • 기부 등록<br>      - 사용자가 기부를 등록하면 데이터베이스에 해당 기부 내용이 등록됩니다.<br>    • 기부 상태 관리<br>      - 기부의 경우 ‘기부등록’, ‘수령확인’, ‘기부처리중’, ‘소득공제완료’의 단계로 처리되며, 사용자는 해당 기부의 처리 상태를 조회할 수 있습니다.<br>    • 기부 금액에 따른 실시간 기부 랭킹<br>      - 실시간 랭킹 서비스를 위해 사용자별 기부 내역 총합을 redis의 sorted list를 통해 관리합니다. 이를 통해 순위를 계산하고, 나머지 정보를 userId를 통해 데이터베이스에서 가져옵니다.<br><br>• **~~기타 모듈~~  외화 계산기 모듈**: ~~해당 서비스에 포함된 나머지 기능들의 동작에 대한 모듈입니다.~~ _사용자가 보유한 외화를 입력하면 총 외화 금액과 실시간 환율 기준의 원화 환산 금액을 자동으로 계산해주는 기능으로, 입력 즉시 계산 결과를 확인할 수 있도록 설계된 모듈입니다._<br>  ◦ **주요 기능**: ~~마이페이지,~~ 외화 계산기<br>  ◦ **기술적 설계**:<br>    ~~• 마이페이지~~<br>      ~~- 사용자는 회원가입 시 등록한 정보들을 마이페이지를 통해서 조회할 수 있습니다.~~<br>      ~~- ‘주소 수정하기’를 통하여 데이터베이스에 저장된 사용자의 거래 희망 주소 및 내 주소를 등록하고 수정할 수 있습니다.~~<br>    • 외화 계산기<br>      - 사용자가 보유한 외화를 _국가별로 선택_하고, 지폐/동전 단위를 수량별로 입력하면 총 외화 금액과 실시간 환율 기준의 원화 환산 금액을 계산해주는 기능입니다.<br>      - 사용자가 통화를 선택하면 해당 국가의 지폐 및 동전 종류가 자동으로 렌더링됩니다.<br>      - 각 화폐 단위별 수량을 입력하면, `amount × denomination`을 계산하여 총 외화 금액을 구하고, 이를 실시간 환율에 곱해 원화로 환산합니다.<br>      - 환율 정보는 외부 API(`https://api.exchangerate-api.com/v4/latest/KRW`)를 통해 최신 데이터를 가져와 반영합니다.<br>      - _계산된 결과는 사용자 입력과 동시에 화면 하단 고정 영역에 실시간으로 표시되며, 프론트엔드-백엔드 간 빠른 데이터 처리 구조로 즉시 응답을 제공합니다._<br>      - _총 외화 금액은 `useEffect` 훅을 사용하여 동적으로 계산되며, 입력 변경 시마다 자동으로 다시 계산됩니다._<br>      - _환산 금액은 선택된 통화의 실시간 환율 정보를 바탕으로 `총액 × 환율` 계산식을 통해 구현됩니다._<br>      - _동전 및 지폐 단위 정보는 상태 변수로 관리되며, 각각 `.reduce()`를 활용해 총 금액을 산출하는 방식으로 구현되었습니다._<br> |
| (4) 주요 기능의 구현 | <strong>[AI 기반 화폐 인식 및 실시간 환율 제공 기능]</strong> <br> 본 기능은 사용자가 외화를 촬영하면 AI가 자동으로 화폐의 종류(지폐/동전)와 발행 국가를 인식하고, 실시간 환율 정보를 반영하여 해당 화폐의 원화 가치를 즉시 제공하는 기능입니다. 정확한 분류와 실시간 반영을 위해 아래와 같은 기술적 접근을 통해 구현되었습니다. <br> 1. 데이터 수집 및 라벨링<br>- 총 ８개국 87종의 화폐(지폐 및 동전)에 대해 총 1,387개의 이미지 데이터를 수집하였고, Roboflow 라벨링 툴을 사용하여 바운딩 박스 기반의 라벨링을 수행하였습니다.<br>- 이후 train/val/test = 970 / 278 / 139의 비율로 데이터를 분리하였습니다.<br> 2. 모델 학습 및 성능 최적화<br>- 초기에 yolov8n.pt 모델로 300 에포크 학습을 진행하였으며, mAP 0.53의 결과를 얻었습니다 (약 8시간 소요).<br>- 이후 yolov8s.pt 모델로 변경하여 에포크별 성능을 평가한 결과, 212 에포크에서 precision 0.7213을 달성한 best model을 확보하였습니다 (약 16~18시간 학습). <br>3. 모델 서버 및 프론트 연동 <br>- 학습된 YOLOv8 모델을 FastAPI를 통해 로컬 백엔드 서버로 구축하였으며, 프론트엔드와 API 통신을 통해 실시간으로 인식 결과를 받아올 수 있도록 구성하였습니다.<br>- 사용자가 이미지를 업로드하면, 감지된 화폐의 종류와 국가 정보, 그리고 해당 화폐의 실시간 환율 기준 원화 환산 금액이 즉시 화면에 출력되도록 구현하였습니다.<br><br><strong>[외화 총액 및 환산 금액 계산 기능 (외화계산기 기능)]</strong><br>본 기능은 사용자가 보유한 외화의 국가를 선택하고, 해당 국가의 지폐 및 동전 수량을 입력하면, 이를 바탕으로 외화 총액과 실시간 환율 기준의 원화 환산 금액을 자동 계산하여 제공하는 기능입니다. UI/UX 측면에서의 편의성과 실시간 데이터 반영을 위해 아래와 같은 방식으로 구현되었습니다.<br>_해당 기능의 구현을 위하여 외화 계산기 모듈을 도입하였고, 환전 모듈 및 기부 모듈과 기능적으로 연동되도록 설계되었습니다._<br>_환전 모듈에서는 판매자가 보유 금액을 정확하게 계산하기 위해 외화 계산기 기능을 호출하여 활용할 수 있습니다._<br>_기부 모듈에서도 사용자가 입력한 외화 기부 금액을 환산하는 데 본 기능이 활용됩니다._<br><br>1. 국가별 통화 구성 정의<br>- 각 통화(JPY, USD, EUR 등)의 지폐와 동전의 종류 및 기본 수량(0)을 정의한 currencyConfig 객체를 통해 국가별로 금액 종류를 세분화합니다.<br>- 사용자가 통화를 선택하면 해당 통화에 맞는 동전 및 지폐 입력 필드가 자동으로 렌더링됩니다.<br>- _React 상태 관리 구조를 기반으로, 선택된 통화의 구성 정보가 실시간으로 반영되어 화면에 즉시 적용됩니다._<br><br>2. 실시간 환율 API 연동<br>- (`https://api.exchangerate-api.com/v4/latest/KRW`) API를 통해 KRW 기준의 실시간 환율 데이터를 불러옵니다.<br>- 데이터를 받아온 후, 통화별로 1단위당 KRW 환산 값을 계산하여 화면에 표시합니다.<br>- _API 호출 시점은 컴포넌트 마운트 이후이며, currency 상태가 변경될 경우에도 재요청이 수행됩니다._<br><br>3. 금액 입력 및 자동 계산 처리<br>- 사용자가 각 지폐/동전 입력란에 개수를 입력하면, 해당 금액 × 개수를 계산하여 외화 총액을 실시간으로 업데이트합니다.<br>- 동시에, 해당 외화 총액 × 실시간 환율을 계산하여 원화 환산 금액도 함께 실시간으로 계산됩니다.<br>- 계산은 useEffect 훅을 통해 coinData, billData가 변경될 때마다 자동 반영되며, 합산된 외화 금액과 원화 금액은 하단 고정 바에 표시됩니다.<br>- _총 외화 금액은 각 denomination별 입력값을 reduce()로 누적 계산하는 방식으로 구현하였고, 실시간 환산은 환율 정보 객체와 연동하여 자동 반영됩니다._<br>- _계산 결과는 사용자가 입력을 마치지 않아도 입력 즉시 반영됩니다._<br><br><strong>[판매자 자동 추천 기능]</strong><br>본 기능은 사용자가 구매하고자 하는 외화의 통화, 희망 금액 범위, 위치 정보를 입력하면, 조건에 부합하는 판매자를 자동으로 탐색하여 거리 순으로 추천하는 시스템입니다. 사용자 맞춤형 추천을 통해 거래의 효율성과 신뢰도를 높이는 것을 목표로 하며, 다음과 같은 과정을 통해 구현됩니다.<br>_해당 기능의 구현을 위하여 환전 모듈과 채팅 모듈을 도입하였고, 판매자 필터링/정렬 모듈과 위치 처리 모듈을 함께 구현하였습니다._<br>_채팅 모듈과의 연동을 통해, 추천된 판매자와의 실시간 1:1 거래 조율이 가능하도록 구성하였습니다._<br><br>1. 판매자 필터링<br>- 백엔드에서 사용자의 구매 정보(통화, 최소/최대 금액, 현재 위치)를 기반으로 데이터베이스에서 조건에 맞는 판매자 정보를 조회합니다.<br>- 현재 로그인한 사용자와 일치하는 판매자의 판매글은 자동 제외하여 자기 자신과 거래하지 않도록 필터링합니다.<br>- 결과적으로 '판매 중' 상태인 상품만 포함된 판매자 목록을 추출합니다.<br>- _서버 측에서는 사용자 ID와 판매 상태 조건을 통해 응답 데이터를 선별한 뒤, 프론트에서 한 번 더 필터링을 수행합니다._<br><br>2. 거리 기반 판매자 정렬<br>- 판매자와 구매자의 위치 정보를 바탕으로 위도/경도를 이용한 거리 계산 알고리즘(calculateDistance)을 사용해 양자 간 거리(km)를 계산합니다.<br>- 이 거리를 기준으로 판매자들을 오름차순 정렬하여, 가까운 순서대로 추천 리스트를 제공합니다.<br>- _거리 계산 로직은 위도-경도를 이용한 하버사인 공식을 활용하였습니다._<br><br>3. 실시간 환율 적용<br>- 각 판매자의 통화 정보를 기반으로 외부 환율 API(https://api.exchangerate-api.com)를 호출하여 KRW 환산 금액을 동적으로 계산합니다.<br>- 사용자는 판매자가 제시한 외화 금액뿐만 아니라, 실시간 환율 기준의 원화 금액을 함께 확인할 수 있습니다.<br>- _환율은 통화별 중복 요청을 줄이기 위해 Set()을 사용해 고유 통화만 추출한 후, Promise.all로 병렬 API 호출을 수행합니다._<br><br>4. 판매자 위치를 행정동으로 변환<br>- 판매자가 등록한 도로명 주소를 Kakao Map API를 통해 좌표 정보(x, y)로 변환한 후, 다시 해당 좌표를 바탕으로 행정동 주소로 역변환하여, 사용자는 친숙한 지역명으로 판매자의 위치를 확인할 수 있습니다.<br>- _Kakao Map API의 coord2regioncode 인터페이스를 사용하며, 'H'(행정동) 유형의 결과만 추출하도록 처리하였습니다._<br><br>5. 프론트엔드 렌더링 ~~및 재추천 기능~~<br>- 필터링된 판매자 정보는 React 컴포넌트를 통해 리스트 형태로 출력되며, 사용자는 판매자의 통화, 금액, 거리, 위치 등을 한눈에 파악할 수 있습니다.<br>|
| (5) 기타 | |

<br>
